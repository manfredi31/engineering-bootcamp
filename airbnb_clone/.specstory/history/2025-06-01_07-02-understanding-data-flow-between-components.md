<!-- Generated by SpecStory -->

# Understanding data flow between components (2025-06-01 09:02:31)

_**User**_

Can you please look at the @RentModal.tsx (parent component) and @Counter.tsx (child component) and explain me how the data flows?

---

_**Assistant**_

I'll help you understand how data flows between these components, explaining it from first principles since you're learning to code.

Let's break this down step by step:

1. **Data Flow Overview**
The data flows in what we call a "parent-to-child" relationship, where:
- `RentModal.tsx` is the parent component
- `Counter.tsx` is the child component

2. **In the Parent (RentModal.tsx)**
The parent component manages three pieces of state using React's `useForm` hook:
```135:137:airbnb_clone-frontend/src/components/modals/RentModal.tsx
const guestCount = watch('guestCount')
const roomCount = watch('roomCount')
const bathroomCount = watch('bathroomCount')
```
These are the values that keep track of how many guests, rooms, and bathrooms the user has selected.

3. **The Connection Point**
When the parent renders the Counter components, it passes down two important things:
```144:164:airbnb_clone-frontend/src/components/modals/RentModal.tsx
<Counter
    title="Guests"
    subtitle="How many guests do you allow?"
    value={guestCount}
    onChange={(value) => setCustomValue('guestCount', value)}
/>
<hr/>
<Counter
    title="Rooms"
    subtitle="How many rooms do you have?"
    value={roomCount}
    onChange={(value) => setCustomValue('roomCount', value)}
/>
<hr/>
<Counter
    title="Bathrooms"
    subtitle="How many bathrooms do you have?"
    value={bathroomCount}
    onChange={(value) => setCustomValue('bathroomCount', value)}
/>
```

For each Counter, it passes:
- The current value (like `guestCount`)
- A function to update that value (`setCustomValue`)

4. **In the Child (Counter.tsx)**
The Counter component receives these values as props:
```4:9:airbnb_clone-frontend/src/components/inputs/Counter.tsx
interface CounterProps {
    title: string;
    subtitle: string;
    value: number;
    onChange: (value: number) => void
}
```

When the user clicks the plus or minus buttons, the Counter component calls the `onChange` function it received from the parent:
```17:24:airbnb_clone-frontend/src/components/inputs/Counter.tsx
const onAdd = useCallback(()=>{
    onChange(value + 1 )
}, [onChange, value])

const onSubtract = useCallback(()=>{
    if (value > 0) {
        onChange(value - 1)
    }
},[onChange, value])
```

5. **The Complete Flow**
Here's how it all works together:
1. User clicks "+" in the Counter component
2. Counter calls its `onAdd` function
3. `onAdd` calls the `onChange` function it received from RentModal
4. This triggers `setCustomValue` in RentModal
5. The value in RentModal updates
6. The new value flows back down to Counter through the `value` prop
7. Counter displays the new value

This is what we call "unidirectional data flow" in React - data flows down from parent to child through props, and changes flow back up through callback functions. The parent (RentModal) is the source of truth for the data, and the child (Counter) just displays it and requests changes.

Think of it like a restaurant:
- The parent (RentModal) is like the kitchen that owns the food
- The child (Counter) is like the waiter that shows the food to customers
- When a customer wants a change, the waiter (Counter) doesn't change the food directly but asks the kitchen (RentModal) to make the change

This pattern helps keep our applications predictable and easier to debug because we always know where our data lives and how it can be changed.

---

_**User**_

I guess what is weird to me is that we dont store the values in a regular useState, but we store them using React Hook Form. And kinda the way to get the values is not typical input forms, but are more complex counters. Can you talk a little bit about that and how does React Hook Form works here?

---

_**Assistant**_



---

